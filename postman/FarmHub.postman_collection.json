{
  "info": {
    "name": "FarmHub API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      { "key": "token", "type": "string", "value": "{{accessToken}}" }
    ]
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Obtain Token",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"{{username}}\",\n  \"password\": \"{{password}}\"\n}"
            },
            "url": { "raw": "{{baseUrl}}/auth/token/", "host": ["{{baseUrl}}"], "path": ["auth","token",""] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "pm.collectionVariables.set('accessToken', json.access || '');",
                  "pm.collectionVariables.set('refreshToken', json.refresh || '');"
                ]
              }
            }
          ]
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [ { "key": "Content-Type", "value": "application/json" } ],
            "body": { "mode": "raw", "raw": "{\n  \"refresh\": \"{{refreshToken}}\"\n}" },
            "url": { "raw": "{{baseUrl}}/auth/token/refresh/", "host": ["{{baseUrl}}"], "path": ["auth","token","refresh",""] }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "const json = pm.response.json();",
                  "if (json.access) pm.collectionVariables.set('accessToken', json.access);"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Health",
      "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/healthz/", "host": ["{{baseUrl}}"], "path": ["healthz",""] } }
    },
    {
      "name": "Core",
      "item": [
        {
          "name": "Farms",
          "item": [
            { "name": "List", "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/farms/", "host": ["{{baseUrl}}"], "path": ["api","farms",""] } } },
            { "name": "Create (Agent self-manage)", "request": { "method": "POST", "header": [ {"key":"Content-Type","value":"application/json"} ], "body": { "mode":"raw", "raw": "{\n  \"name\": \"New Farm\",\n  \"location\": \"Your District, Bangladesh\"\n}" }, "url": { "raw": "{{baseUrl}}/api/farms/", "host": ["{{baseUrl}}"], "path": ["api","farms",""] } } },
            { "name": "Create (SuperAdmin specify agent)", "request": { "method": "POST", "header": [ {"key":"Content-Type","value":"application/json"} ], "body": { "mode":"raw", "raw": "{\n  \"name\": \"Another Farm\",\n  \"location\": \"Rajshahi\",\n  \"agent_id\": {{agentId}}\n}" }, "url": { "raw": "{{baseUrl}}/api/farms/", "host": ["{{baseUrl}}"], "path": ["api","farms",""] } } }
          ]
        },
        {
          "name": "FarmerProfiles",
          "item": [
            { "name": "List", "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/farmer-profiles/", "host": ["{{baseUrl}}"], "path": ["api","farmer-profiles",""] } } },
            { "name": "Create (Agent onboard)", "request": { "method": "POST", "header": [ {"key":"Content-Type","value":"application/json"} ], "body": { "mode":"raw", "raw": "{\n  \"user_id\": {{newFarmerUserId}},\n  \"farm\": {{farmId}}\n}" }, "url": { "raw": "{{baseUrl}}/api/farmer-profiles/", "host": ["{{baseUrl}}"], "path": ["api","farmer-profiles",""] } } }
          ]
        },
        {
          "name": "Cows",
          "item": [
            { "name": "List", "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/cows/", "host": ["{{baseUrl}}"], "path": ["api","cows",""] } } },
            { "name": "Create (Agent)", "request": { "method": "POST", "header": [ {"key":"Content-Type","value":"application/json"} ], "body": { "mode":"raw", "raw": "{\n  \"tag\": \"BD-RJ-999\",\n  \"breed\": \"Sahiwal\",\n  \"farm_id\": {{farmId}},\n  \"owner_id\": {{farmerProfileId}}\n}" }, "url": { "raw": "{{baseUrl}}/api/cows/", "host": ["{{baseUrl}}"], "path": ["api","cows",""] } } },
            { "name": "Create (Farmer)", "request": { "method": "POST", "header": [ {"key":"Content-Type","value":"application/json"} ], "body": { "mode":"raw", "raw": "{\n  \"tag\": \"BD-RJ-998\",\n  \"breed\": \"Red Chittagong\",\n  \"farm_id\": {{myFarmId}}\n}" }, "url": { "raw": "{{baseUrl}}/api/cows/", "host": ["{{baseUrl}}"], "path": ["api","cows",""] } } }
          ]
        },
        {
          "name": "Activities",
          "item": [
            { "name": "List", "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/activities/", "host": ["{{baseUrl}}"], "path": ["api","activities",""] } } },
            { "name": "Create", "request": { "method": "POST", "header": [ {"key":"Content-Type","value":"application/json"} ], "body": { "mode":"raw", "raw": "{\n  \"cow_id\": {{cowId}},\n  \"type\": \"vaccination\",\n  \"date\": \"{{today}}\",\n  \"notes\": \"FMD vaccine\"\n}" }, "url": { "raw": "{{baseUrl}}/api/activities/", "host": ["{{baseUrl}}"], "path": ["api","activities",""] } } }
          ]
        },
        {
          "name": "Milk Records",
          "item": [
            { "name": "List", "request": { "method": "GET", "url": { "raw": "{{baseUrl}}/api/milk-records/", "host": ["{{baseUrl}}"], "path": ["api","milk-records",""] } } },
            { "name": "Create", "request": { "method": "POST", "header": [ {"key":"Content-Type","value":"application/json"} ], "body": { "mode":"raw", "raw": "{\n  \"cow_id\": {{cowId}},\n  \"date\": \"{{today}}\",\n  \"liters\": 7.50\n}" }, "url": { "raw": "{{baseUrl}}/api/milk-records/", "host": ["{{baseUrl}}"], "path": ["api","milk-records",""] } } }
          ]
        }
      ]
    },
    {
      "name": "Reporting",
      "item": [
        { "name": "Summary", "request": { "method": "GET", "url": { "raw": "{{reportUrl}}/summary", "host": ["{{reportUrl}}"], "path": ["summary"] } } },
        { "name": "Farm Summary", "request": { "method": "GET", "url": { "raw": "{{reportUrl}}/reports/farm/{{farmId}}/summary", "host": ["{{reportUrl}}"], "path": ["reports","farm","{{farmId}}","summary"] } } },
        { "name": "Farm Milk Production", "request": { "method": "GET", "url": { "raw": "{{reportUrl}}/reports/farm/{{farmId}}/milk-production", "host": ["{{reportUrl}}"], "path": ["reports","farm","{{farmId}}","milk-production"] } } },
        { "name": "Farm Daily Milk", "request": { "method": "GET", "url": { "raw": "{{reportUrl}}/reports/farm/{{farmId}}/daily-milk", "host": ["{{reportUrl}}"], "path": ["reports","farm","{{farmId}}","daily-milk"] } } }
      ]
    }
  ],
  "variable": [
    { "key": "baseUrl", "value": "http://127.0.0.1:8000" },
    { "key": "reportUrl", "value": "http://127.0.0.1:8001" },
    { "key": "username", "value": "farmer_sunamganj" },
    { "key": "password", "value": "Farmer@123" },
    { "key": "accessToken", "value": "" },
    { "key": "refreshToken", "value": "" },
    { "key": "agentId", "value": "" },
    { "key": "farmId", "value": "1" },
    { "key": "myFarmId", "value": "1" },
    { "key": "farmerProfileId", "value": "" },
    { "key": "newFarmerUserId", "value": "" },
    { "key": "cowId", "value": "" },
    { "key": "today", "value": "2025-08-21" }
  ]
}
